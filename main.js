!function(){"use strict";class t{constructor(t,e){this._settings=t,this._formElement=e,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector)}enableValidation(){this._setEventListeners()}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}_checkInputValidity(t){const e=this._formElement.querySelector(`#${t.id}-error`);t.validity.valid?(t.classList.remove(this._settings.inputErrorClass),e.textContent=""):(t.classList.add(this._settings.inputErrorClass),e.textContent=t.validationMessage)}_toggleButtonState(){this._inputList.some((t=>!t.validity.valid))?(this.disableButton(),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1)}resetValidation(){this._toggleButtonState(),this._inputList.forEach((t=>{const e=this._formElement.querySelector(`#${t.id}-error`);t.classList.remove(this._settings.inputErrorClass),e.textContent=""}))}disableButton(){this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0}}class e{constructor(t,e,s){this._name=t.name,this._link=t.link,this._cardSelector=e,this._handleImageClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._toggleLike())),this._deleteButton.addEventListener("click",(()=>this._deleteCard())),this._cardImage.addEventListener("click",(()=>this._handleImageClick(this._name,this._link)))}_toggleLike(){this._likeButton.classList.toggle("card__like-button_active")}_deleteCard(){this._element.remove()}generateCard(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._cardImage=this._element.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this._element}}class s{constructor(t){this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._popup.querySelector(".modal__close").addEventListener("click",(()=>this.close())),this._popup.addEventListener("click",(t=>{t.target===this._popup&&this.close()}))}}class n extends s{constructor(t,e){super(t),this._handleFormSubmit=e,this._form=this._popup.querySelector(".modal__form"),this._inputList=this._form.querySelectorAll(".modal__input"),this._submitButton=this._form.querySelector(".modal__button")}_getInputValues(){const t={};return this._inputList.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(t=>{t.preventDefault();const e=this._getInputValues();this._handleFormSubmit(e),this._form.reset(),this.close()}))}close(){super.close()}}const i={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},o=document.querySelector("#profile-edit-button"),r=document.querySelector("#profile-title-input"),a=document.querySelector("#profile-description-input"),l=document.querySelector(".profile__add-button"),c=document.querySelector("#profile-edit-modal .modal__form"),u=document.querySelector("#add-card-modal .modal__form"),d=new t(i,c);d.enableValidation();const _=new t(i,u);_.enableValidation();const m=new class extends s{constructor(t){super(t),this._popupImage=this._popup.querySelector(".modal__image"),this._popupCaption=this._popup.querySelector(".modal__image-description")}open(t){this._popupImage.src=t.link,this._popupImage.alt=t.name,this._popupCaption.textContent=t.name,super.open()}}("#card-picture-modal");function h(t,e){m.open({name:t,link:e})}m.setEventListeners();const p=new n("#profile-edit-modal",(t=>{b.setUserInfo({name:t.title,job:t.description}),p.close()})),g=new n("#add-card-modal",(t=>{const e=E({name:t.title,link:t.description});v.addItem(e),g.close(),_.disableButton()}));function E(t){return new e(t,"#card-template",h).generateCard()}p.setEventListeners(),g.setEventListeners(),o.addEventListener("click",(()=>{const t=b.getUserInfo();r.value=t.name,a.value=t.job,d.resetValidation(),p.open()})),l.addEventListener("click",(()=>{g.open()}));const b=new class{constructor(t){let{nameSelector:e,jobSelector:s}=t;this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(t){let{name:e,job:s}=t;e&&(this._nameElement.textContent=e),s&&(this._jobElement.textContent=s)}}({nameSelector:".profile__title",jobSelector:".profile__description"}),v=new class{constructor(t,e){let{items:s,renderer:n}=t;this._items=s,this._renderer=n,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:t=>{const e=E(t);v.addItem(e)}},".cards__list");v.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQWUsTUFBTUEsRUFDbkJDLFdBQUFBLENBQVlDLEVBQVVDLEdBQ3BCQyxLQUFLQyxVQUFZSCxFQUNqQkUsS0FBS0UsYUFBZUgsRUFDcEJDLEtBQUtHLFdBQWFDLE1BQU1DLEtBQ3RCTCxLQUFLRSxhQUFhSSxpQkFBaUJOLEtBQUtDLFVBQVVNLGdCQUVwRFAsS0FBS1EsY0FBZ0JSLEtBQUtFLGFBQWFPLGNBQ3JDVCxLQUFLQyxVQUFVUyxxQkFFbkIsQ0FFQUMsZ0JBQUFBLEdBQ0VYLEtBQUtZLG9CQUNQLENBRUFBLGtCQUFBQSxHQUNFWixLQUFLYSxxQkFDTGIsS0FBS0csV0FBV1csU0FBU0MsSUFDdkJBLEVBQWFDLGlCQUFpQixTQUFTLEtBQ3JDaEIsS0FBS2lCLG9CQUFvQkYsR0FDekJmLEtBQUthLG9CQUFvQixHQUN6QixHQUVOLENBRUFJLG1CQUFBQSxDQUFvQkYsR0FDbEIsTUFBTUcsRUFBZWxCLEtBQUtFLGFBQWFPLGNBQ3JDLElBQUlNLEVBQWFJLFlBRWRKLEVBQWFLLFNBQVNDLE9BSXpCTixFQUFhTyxVQUFVQyxPQUFPdkIsS0FBS0MsVUFBVXVCLGlCQUM3Q04sRUFBYU8sWUFBYyxLQUozQlYsRUFBYU8sVUFBVUksSUFBSTFCLEtBQUtDLFVBQVV1QixpQkFDMUNOLEVBQWFPLFlBQWNWLEVBQWFZLGtCQUs1QyxDQUVBZCxrQkFBQUEsR0FDMEJiLEtBQUtHLFdBQVd5QixNQUNyQ2IsSUFBa0JBLEVBQWFLLFNBQVNDLFNBR3pDckIsS0FBSzZCLGdCQUNMN0IsS0FBS1EsY0FBY3NCLFVBQVcsSUFFOUI5QixLQUFLUSxjQUFjYyxVQUFVQyxPQUFPdkIsS0FBS0MsVUFBVThCLHFCQUNuRC9CLEtBQUtRLGNBQWNzQixVQUFXLEVBRWxDLENBR0FFLGVBQUFBLEdBQ0VoQyxLQUFLYSxxQkFDTGIsS0FBS0csV0FBV1csU0FBU0MsSUFDdkIsTUFBTUcsRUFBZWxCLEtBQUtFLGFBQWFPLGNBQ3JDLElBQUlNLEVBQWFJLFlBRW5CSixFQUFhTyxVQUFVQyxPQUFPdkIsS0FBS0MsVUFBVXVCLGlCQUM3Q04sRUFBYU8sWUFBYyxFQUFFLEdBRWpDLENBRUFJLGFBQUFBLEdBQ0U3QixLQUFLUSxjQUFjYyxVQUFVSSxJQUFJMUIsS0FBS0MsVUFBVThCLHFCQUNoRC9CLEtBQUtRLGNBQWNzQixVQUFXLENBQ2hDLEVDbkVhLE1BQU1HLEVBQ25CcEMsV0FBQUEsQ0FBWXFDLEVBQU1DLEVBQWNDLEdBQzlCcEMsS0FBS3FDLE1BQVFILEVBQUtJLEtBQ2xCdEMsS0FBS3VDLE1BQVFMLEVBQUtNLEtBQ2xCeEMsS0FBS3lDLGNBQWdCTixFQUNyQm5DLEtBQUswQyxrQkFBb0JOLENBQzNCLENBRUFPLFlBQUFBLEdBS0UsT0FKb0JDLFNBQ2pCbkMsY0FBY1QsS0FBS3lDLGVBQ25CSSxRQUFRcEMsY0FBYyxTQUN0QnFDLFdBQVUsRUFFZixDQUVBbEMsa0JBQUFBLEdBQ0VaLEtBQUsrQyxZQUFZL0IsaUJBQWlCLFNBQVMsSUFBTWhCLEtBQUtnRCxnQkFDdERoRCxLQUFLaUQsY0FBY2pDLGlCQUFpQixTQUFTLElBQU1oQixLQUFLa0QsZ0JBQ3hEbEQsS0FBS21ELFdBQVduQyxpQkFBaUIsU0FBUyxJQUN4Q2hCLEtBQUswQyxrQkFBa0IxQyxLQUFLcUMsTUFBT3JDLEtBQUt1QyxRQUU1QyxDQUVBUyxXQUFBQSxHQUNFaEQsS0FBSytDLFlBQVl6QixVQUFVOEIsT0FBTywyQkFDcEMsQ0FFQUYsV0FBQUEsR0FDRWxELEtBQUtxRCxTQUFTOUIsUUFDaEIsQ0FFQStCLFlBQUFBLEdBWUUsT0FYQXRELEtBQUtxRCxTQUFXckQsS0FBSzJDLGVBQ3JCM0MsS0FBSytDLFlBQWMvQyxLQUFLcUQsU0FBUzVDLGNBQWMsc0JBQy9DVCxLQUFLaUQsY0FBZ0JqRCxLQUFLcUQsU0FBUzVDLGNBQWMsd0JBQ2pEVCxLQUFLbUQsV0FBYW5ELEtBQUtxRCxTQUFTNUMsY0FBYyxnQkFFOUNULEtBQUttRCxXQUFXSSxJQUFNdkQsS0FBS3VDLE1BQzNCdkMsS0FBS21ELFdBQVdLLElBQU14RCxLQUFLcUMsTUFDM0JyQyxLQUFLcUQsU0FBUzVDLGNBQWMsZ0JBQWdCZ0IsWUFBY3pCLEtBQUtxQyxNQUUvRHJDLEtBQUtZLHFCQUVFWixLQUFLcUQsUUFDZCxFQzdDYSxNQUFNSSxFQUNuQjVELFdBQUFBLENBQVk2RCxHQUNWMUQsS0FBSzJELE9BQVNmLFNBQVNuQyxjQUFjaUQsR0FDckMxRCxLQUFLNEQsZ0JBQWtCNUQsS0FBSzRELGdCQUFnQkMsS0FBSzdELEtBQ25ELENBRUE4RCxJQUFBQSxHQUNFOUQsS0FBSzJELE9BQU9yQyxVQUFVSSxJQUFJLGdCQUMxQmtCLFNBQVM1QixpQkFBaUIsVUFBV2hCLEtBQUs0RCxnQkFDNUMsQ0FFQUcsS0FBQUEsR0FDRS9ELEtBQUsyRCxPQUFPckMsVUFBVUMsT0FBTyxnQkFDN0JxQixTQUFTb0Isb0JBQW9CLFVBQVdoRSxLQUFLNEQsZ0JBQy9DLENBRUFBLGVBQUFBLENBQWdCSyxHQUNJLFdBQWRBLEVBQU1DLEtBQ1JsRSxLQUFLK0QsT0FFVCxDQUVBSSxpQkFBQUEsR0FDc0JuRSxLQUFLMkQsT0FBT2xELGNBQWMsaUJBQ2xDTyxpQkFBaUIsU0FBUyxJQUFNaEIsS0FBSytELFVBRWpEL0QsS0FBSzJELE9BQU8zQyxpQkFBaUIsU0FBVWlELElBQ2pDQSxFQUFNRyxTQUFXcEUsS0FBSzJELFFBQ3hCM0QsS0FBSytELE9BQ1AsR0FFSixFQzdCYSxNQUFNTSxVQUFzQlosRUFDekM1RCxXQUFBQSxDQUFZNkQsRUFBZVksR0FDekJDLE1BQU1iLEdBQ04xRCxLQUFLd0Usa0JBQW9CRixFQUN6QnRFLEtBQUt5RSxNQUFRekUsS0FBSzJELE9BQU9sRCxjQUFjLGdCQUN2Q1QsS0FBS0csV0FBYUgsS0FBS3lFLE1BQU1uRSxpQkFBaUIsaUJBQzlDTixLQUFLUSxjQUFnQlIsS0FBS3lFLE1BQU1oRSxjQUFjLGlCQUNoRCxDQUdBaUUsZUFBQUEsR0FDRSxNQUFNQyxFQUFTLENBQUMsRUFJaEIsT0FIQTNFLEtBQUtHLFdBQVdXLFNBQVM4RCxJQUN2QkQsRUFBT0MsRUFBTXRDLE1BQVFzQyxFQUFNQyxLQUFLLElBRTNCRixDQUNULENBR0FSLGlCQUFBQSxHQUNFSSxNQUFNSixvQkFDTm5FLEtBQUt5RSxNQUFNekQsaUJBQWlCLFVBQVc4RCxJQUNyQ0EsRUFBSUMsaUJBQ0osTUFBTUMsRUFBV2hGLEtBQUswRSxrQkFFdEIxRSxLQUFLd0Usa0JBQWtCUSxHQUN2QmhGLEtBQUt5RSxNQUFNUSxRQUNYakYsS0FBSytELE9BQU8sR0FFaEIsQ0FHQUEsS0FBQUEsR0FDRVEsTUFBTVIsT0FDUixFQ25DRixNQTRCTW1CLEVBQXFCLENBQ3pCM0UsY0FBZSxnQkFDZkcscUJBQXNCLGlCQUN0QnFCLG9CQUFxQix5QkFDckJQLGdCQUFpQiwwQkFDakIyRCxXQUFZLHdCQUlSQyxFQUFpQnhDLFNBQVNuQyxjQUFjLHdCQUN4QzRFLEVBQW9CekMsU0FBU25DLGNBQWMsd0JBQzNDNkUsRUFBMEIxQyxTQUFTbkMsY0FDdkMsOEJBRUk4RSxFQUFtQjNDLFNBQVNuQyxjQUFjLHdCQUMxQytFLEVBQWtCNUMsU0FBU25DLGNBQy9CLG9DQUVJZ0YsRUFBYzdDLFNBQVNuQyxjQUFjLGdDQzVCckNpRixFQUEyQixJQUFJOUYsRUFDbkNzRixFQUNBTSxHQUVGRSxFQUF5Qi9FLG1CQUV6QixNQUFNZ0YsRUFBdUIsSUFBSS9GLEVBQWNzRixFQUFvQk8sR0FDbkVFLEVBQXFCaEYsbUJBS3JCLE1BQU1pRixFQUFhLElDN0JKLGNBQTZCbkMsRUFDMUM1RCxXQUFBQSxDQUFZNkQsR0FDVmEsTUFBTWIsR0FDTjFELEtBQUs2RixZQUFjN0YsS0FBSzJELE9BQU9sRCxjQUFjLGlCQUM3Q1QsS0FBSzhGLGNBQWdCOUYsS0FBSzJELE9BQU9sRCxjQUFjLDRCQUNqRCxDQUdBcUQsSUFBQUEsQ0FBSzVCLEdBRUhsQyxLQUFLNkYsWUFBWXRDLElBQU1yQixFQUFLTSxLQUM1QnhDLEtBQUs2RixZQUFZckMsSUFBTXRCLEVBQUtJLEtBQzVCdEMsS0FBSzhGLGNBQWNyRSxZQUFjUyxFQUFLSSxLQUV0Q2lDLE1BQU1ULE1BQ1IsR0Rjb0MsdUJBR3RDLFNBQVMxQixFQUFpQkUsRUFBTUUsR0FDOUJvRCxFQUFXOUIsS0FBSyxDQUFFeEIsT0FBTUUsUUFDMUIsQ0FKQW9ELEVBQVd6QixvQkFPWCxNQUFNNEIsRUFBbUIsSUFBSTFCLEVBQWMsdUJBQXdCbkMsSUFDakU4RCxFQUFTQyxZQUFZLENBQUUzRCxLQUFNSixFQUFLZ0UsTUFBT0MsSUFBS2pFLEVBQUtrRSxjQUNuREwsRUFBaUJoQyxPQUFPLElBSXBCc0MsRUFBZSxJQUFJaEMsRUFBYyxtQkFBb0JuQyxJQUN6RCxNQUFNb0UsRUFBVUMsRUFBVyxDQUFFakUsS0FBTUosRUFBS2dFLE1BQU8xRCxLQUFNTixFQUFLa0UsY0FDMURJLEVBQVlDLFFBQVFILEdBQ3BCRCxFQUFhdEMsUUFDYjRCLEVBQXFCOUQsZUFBZSxJQU90QyxTQUFTMEUsRUFBV0csR0FHbEIsT0FGYSxJQUFJekUsRUFBS3lFLEVBQVUsaUJBQWtCdEUsR0FDekJrQixjQUUzQixDQVJBeUMsRUFBaUI1QixvQkFDakJrQyxFQUFhbEMsb0JBWWJpQixFQUFlcEUsaUJBQWlCLFNBQVMsS0FDdkMsTUFBTTJGLEVBQVdYLEVBQVNZLGNBQzFCdkIsRUFBa0JSLE1BQVE4QixFQUFTckUsS0FDbkNnRCxFQUF3QlQsTUFBUThCLEVBQVNSLElBQ3pDVCxFQUF5QjFELGtCQUN6QitELEVBQWlCakMsTUFBTSxJQUl6QnlCLEVBQWlCdkUsaUJBQWlCLFNBQVMsS0FDekNxRixFQUFhdkMsTUFBTSxJQUlyQixNQUFNa0MsRUFBVyxJRS9FRixNQUNibkcsV0FBQUEsQ0FBV2dILEdBQWdDLElBQS9CLGFBQUVDLEVBQVksWUFBRUMsR0FBYUYsRUFDdkM3RyxLQUFLZ0gsYUFBZXBFLFNBQVNuQyxjQUFjcUcsR0FDM0M5RyxLQUFLaUgsWUFBY3JFLFNBQVNuQyxjQUFjc0csRUFDNUMsQ0FHQUgsV0FBQUEsR0FDRSxNQUFPLENBQ0x0RSxLQUFNdEMsS0FBS2dILGFBQWF2RixZQUN4QjBFLElBQUtuRyxLQUFLaUgsWUFBWXhGLFlBRTFCLENBR0F3RSxXQUFBQSxDQUFXaUIsR0FBZ0IsSUFBZixLQUFFNUUsRUFBSSxJQUFFNkQsR0FBS2UsRUFDbkI1RSxJQUFNdEMsS0FBS2dILGFBQWF2RixZQUFjYSxHQUN0QzZELElBQUtuRyxLQUFLaUgsWUFBWXhGLFlBQWMwRSxFQUMxQyxHRjZENEIsQ0FDNUJXLGFBQWMsa0JBQ2RDLFlBQWEsMEJBSVRQLEVBQWMsSUdyRkwsTUFDYjNHLFdBQUFBLENBQVdnSCxFQUFzQk0sR0FBbUIsSUFBeEMsTUFBRUMsRUFBSyxTQUFFQyxHQUFVUixFQUM3QjdHLEtBQUtzSCxPQUFTRixFQUNkcEgsS0FBS3VILFVBQVlGLEVBQ2pCckgsS0FBS3dILFdBQWE1RSxTQUFTbkMsY0FBYzBHLEVBQzNDLENBR0FNLFdBQUFBLEdBQ0V6SCxLQUFLc0gsT0FBT3hHLFNBQVM0RyxJQUNuQjFILEtBQUt1SCxVQUFVRyxFQUFLLEdBRXhCLENBR0FqQixPQUFBQSxDQUFRa0IsR0FDTjNILEtBQUt3SCxXQUFXSSxRQUFRRCxFQUMxQixHSHFFQSxDQUNFUCxNRHRGaUIsQ0FDbkIsQ0FDRTlFLEtBQU0sa0JBQ05FLEtBQU0sc0dBRVIsQ0FDRUYsS0FBTSxjQUNORSxLQUFNLHlHQUVSLENBQ0VGLEtBQU0saUJBQ05FLEtBQU0sNEdBRVIsQ0FDRUYsS0FBTSxVQUNORSxLQUFNLHFHQUVSLENBQ0VGLEtBQU0sd0JBQ05FLEtBQU0scUdBRVIsQ0FDRUYsS0FBTSxpQkFDTkUsS0FBTSxtR0NnRU42RSxTQUFXSyxJQUNULE1BQU1HLEVBQWN0QixFQUFXbUIsR0FDL0JsQixFQUFZQyxRQUFRb0IsRUFBWSxHQUdwQyxnQkFJRnJCLEVBQVlpQixhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBjb25zdCBoYXNJbnZhbGlkSW5wdXQgPSB0aGlzLl9pbnB1dExpc3Quc29tZShcclxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxyXG4gICAgKTtcclxuICAgIGlmIChoYXNJbnZhbGlkSW5wdXQpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL25ldyBhZGRpdGlvbnMgdG8gZml4IHN1Ym1pdCBidXR0b24gcmVzZXQgdG8gaW52YWxpZFxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7IC8vIFJlc2V0IHRoZSBidXR0b24gc3RhdGVcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICAgKTtcclxuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTsgLy8gUmVtb3ZlIGlucHV0IGVycm9yIHN0eWxpbmdcclxuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjsgLy8gQ2xlYXIgZXJyb3IgbWVzc2FnZXNcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcbiAgLy9lbmRcclxuXHJcbiAgLy9uZXcgZnVuY3Rpb25cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl90b2dnbGVMaWtlKCkpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9kZWxldGVDYXJkKCkpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUxpa2UoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfZGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbiAgfVxyXG5cclxuICAvLyBQcml2YXRlIG1ldGhvZCB0byBjb2xsZWN0IGZvcm0gZGF0YVxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IHZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgLy8gT3ZlcnJpZGUgdGhlIHNldEV2ZW50TGlzdGVuZXJzIG1ldGhvZCB0byBpbmNsdWRlIGZvcm0gc3VibWlzc2lvblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gQ2FsbCBwYXJlbnQgbWV0aG9kIHRvIHNldCB1cCBjbG9zZSBsaXN0ZW5lcnNcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjb25zdCBmb3JtRGF0YSA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICAgIC8vIEFzc3VtaW5nIF9oYW5kbGVGb3JtU3VibWl0IGlzIHN5bmNocm9ub3VzIG9yIHlvdSBkb24ndCBuZWVkIHRvIHdhaXQgZm9yIGl0cyByZXN1bHQgYmVmb3JlIGNsb3NpbmcgYW5kIHJlc2V0dGluZ1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGZvcm1EYXRhKTtcclxuICAgICAgdGhpcy5fZm9ybS5yZXNldCgpOyAvLyBSZXNldCB0aGUgZm9ybSBhZnRlciBoYW5kbGluZyB0aGUgc3VibWlzc2lvblxyXG4gICAgICB0aGlzLmNsb3NlKCk7IC8vIENsb3NlIHRoZSBwb3B1cCBhZnRlciBzdWJtaXNzaW9uIGFuZCByZXNldFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBQdWJsaWMgbWV0aG9kIHRvIGNsb3NlIHRoZSBwb3B1cCBhbmQgcmVzZXQgdGhlIGZvcm1cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7IC8vIENhbGwgcGFyZW50IG1ldGhvZCB0byBjbG9zZSB0aGUgcG9wdXBcclxuICB9XHJcbn1cclxuIiwiLy8gSW5pdGlhbCBjYXJkIGRhdGFcclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vIFZhbGlkYXRpb24gc2V0dGluZ3NcclxuY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuLyogRWxlbWVudHMgKi9cclxuY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbik7XHJcbmNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsIC5tb2RhbF9fZm9ybVwiXHJcbik7XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbCAubW9kYWxfX2Zvcm1cIik7XHJcblxyXG5leHBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgcHJvZmlsZUVkaXRCdG4sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgYWRkQ2FyZEZvcm0sXHJcbn07XHJcbiIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgcHJvZmlsZUVkaXRCdG4sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgYWRkQ2FyZEZvcm0sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuXHJcbi8vIENyZWF0ZSBGb3JtVmFsaWRhdG9yIGluc3RhbmNlc1xyXG5jb25zdCBwcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgcHJvZmlsZUVkaXRGb3JtXHJcbik7XHJcbnByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYWRkQ2FyZEZvcm0pO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vKiBGdW5jdGlvbnMgKi9cclxuXHJcbi8vIEhhbmRsZXMgb3BlbmluZyB0aGUgaW1hZ2UgcHJldmlldyBtb2RhbFxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2NhcmQtcGljdHVyZS1tb2RhbFwiKTtcclxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpOyAvLyBTZXQgdXAgdGhlIGV2ZW50IGxpc3RlbmVycyBmcm9tIHRoZSBwYXJlbnQgY2xhc3NcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2sobmFtZSwgbGluaykge1xyXG4gIGltYWdlUG9wdXAub3Blbih7IG5hbWUsIGxpbmsgfSk7XHJcbn1cclxuXHJcbi8vIE5ldyBQb3B1cFdpdGhGb3JtIGluc3RhbmNlcyAodXNlcmluZm8gaW50ZWdyYXRpb24gY2hhbmdlKVxyXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsIChkYXRhKSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiBkYXRhLnRpdGxlLCBqb2I6IGRhdGEuZGVzY3JpcHRpb24gfSk7XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpOyAvL2Nsb3NlcyBwb3B1cCBhZnRlciBlZGl0aW5nIHByb2ZpbGVcclxufSk7XHJcbi8vZW5kXHJcblxyXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtY2FyZC1tb2RhbFwiLCAoZGF0YSkgPT4ge1xyXG4gIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKHsgbmFtZTogZGF0YS50aXRsZSwgbGluazogZGF0YS5kZXNjcmlwdGlvbiB9KTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpOyAvLyBBZGQgdGhlIG5ldyBjYXJkIHVzaW5nIFNlY3Rpb24ncyBtZXRob2RcclxuICBhZGRDYXJkUG9wdXAuY2xvc2UoKTsgLy9jbG9zZXMgcG9wdXAgYWZ0ZXIgYWRkaW5nIGNhcmRcclxuICBhZGRDYXJkRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XHJcbn0pO1xyXG5cclxuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGNyZWF0ZSBhIG5ldyBjYXJkXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljayk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudDsgLy8gUmV0dXJuIHRoZSBjYXJkIGVsZW1lbnRcclxufVxyXG5cclxuLyogRXZlbnQgTGlzdGVuZXJzICovXHJcblxyXG4vL3N0YXJ0OiBuZXcgdXNlcmluZm8uanMgaW50ZWdyYXRpb25cclxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7IC8vIEdldCBjdXJyZW50IHVzZXIgZGF0YVxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gdXNlckRhdGEubmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmpvYjtcclxuICBwcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7IC8vIFJlc2V0IHZhbGlkYXRpb24gc3RhdGVcclxuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTsgLy8gT3BlbiB0aGUgZWRpdCBwcm9maWxlIHBvcHVwXHJcbn0pO1xyXG4vL2VuZFxyXG5cclxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7IC8vIE9wZW4gdGhlIGFkZCBjYXJkIHBvcHVwXHJcbn0pO1xyXG5cclxuLy9uZXcgY29kZVxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG59KTtcclxuXHJcbi8vIFNlY3Rpb24gY2xhc3MgaW50ZWdyYXRpb25cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTsgLy8gQ3JlYXRlIHRoZSBjYXJkIGVsZW1lbnRcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7IC8vIEFkZCB0aGUgY2FyZCB0byB0aGUgRE9NXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIuY2FyZHNfX2xpc3RcIiAvLyBTZWxlY3RvciBmb3IgdGhlIGNvbnRhaW5lclxyXG4pO1xyXG5cclxuLy8gUmVuZGVyIHRoZSBpbml0aWFsIGNhcmRzIG9uIHBhZ2UgbG9hZFxyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuLy9uZXcgY29tbWVudCBmb3IgdGVzdCBwdXJwb3Nlc1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtZGVzY3JpcHRpb25cIik7XHJcbiAgfVxyXG5cclxuICAvLyBPdmVycmlkZSB0aGUgb3BlbiBtZXRob2QgdG8gaGFuZGxlIGltYWdlIGFuZCBjYXB0aW9uXHJcbiAgb3BlbihkYXRhKSB7XHJcbiAgICAvLyBkYXRhIHNob3VsZCBiZSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgbmFtZSBhbmQgbGlua1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuXHJcbiAgICBzdXBlci5vcGVuKCk7IC8vIENhbGwgdGhlIHBhcmVudCdzIG9wZW4gbWV0aG9kIHRvIHNob3cgdGhlIHBvcHVwXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICAvLyBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIHVzZXIgaW5mb1xyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyBTZXRzIG5ldyB1c2VyIGluZm8gdG8gdGhlIHBhZ2VcclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XHJcbiAgICBpZiAobmFtZSkgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgaWYgKGpvYikgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7IC8vIEFycmF5IG9mIGRhdGEgdG8gcmVuZGVyXHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyOyAvLyBGdW5jdGlvbiB0byBjcmVhdGUgYW5kIGFkZCBhIHNpbmdsZSBpdGVtXHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTsgLy8gRE9NIGNvbnRhaW5lclxyXG4gIH1cclxuXHJcbiAgLy8gUHVibGljIG1ldGhvZCB0byByZW5kZXIgYWxsIGl0ZW1zXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pOyAvLyBDYWxsIHRoZSByZW5kZXJlciBmdW5jdGlvbiBvbiBlYWNoIGl0ZW1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gUHVibGljIG1ldGhvZCB0byBhZGQgYSBzaW5nbGUgaXRlbSB0byB0aGUgY29udGFpbmVyXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTsgLy8gQWRkIHRoZSBET00gZWxlbWVudCB0byB0aGUgY29udGFpbmVyXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9zZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJxdWVyeVNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiaW5wdXRFcnJvckNsYXNzIiwidGV4dENvbnRlbnQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVzZXRWYWxpZGF0aW9uIiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2xpa2VCdXR0b24iLCJfdG9nZ2xlTGlrZSIsIl9kZWxldGVCdXR0b24iLCJfZGVsZXRlQ2FyZCIsIl9jYXJkSW1hZ2UiLCJ0b2dnbGUiLCJfZWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsInNyYyIsImFsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2dldElucHV0VmFsdWVzIiwidmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiZm9ybURhdGEiLCJyZXNldCIsInZhbGlkYXRpb25TZXR0aW5ncyIsImVycm9yQ2xhc3MiLCJwcm9maWxlRWRpdEJ0biIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJhZGROZXdDYXJkQnV0dG9uIiwicHJvZmlsZUVkaXRGb3JtIiwiYWRkQ2FyZEZvcm0iLCJwcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsImltYWdlUG9wdXAiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cENhcHRpb24iLCJlZGl0UHJvZmlsZVBvcHVwIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInRpdGxlIiwiam9iIiwiZGVzY3JpcHRpb24iLCJhZGRDYXJkUG9wdXAiLCJuZXdDYXJkIiwiY3JlYXRlQ2FyZCIsImNhcmRTZWN0aW9uIiwiYWRkSXRlbSIsImNhcmREYXRhIiwidXNlckRhdGEiLCJnZXRVc2VySW5mbyIsIl9yZWYiLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiX3JlZjIiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkRWxlbWVudCJdLCJzb3VyY2VSb290IjoiIn0=