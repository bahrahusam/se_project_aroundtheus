!function(){"use strict";class e{constructor(e,t){this._settings=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector)}enableValidation(){this._setEventListeners()}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_checkInputValidity(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.validity.valid?(e.classList.remove(this._settings.inputErrorClass),t.textContent=""):(e.classList.add(this._settings.inputErrorClass),t.textContent=e.validationMessage)}_toggleButtonState(){this._inputList.some((e=>!e.validity.valid))?(this.disableButton(),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1)}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.textContent=""}))}disableButton(){this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0}}class t{constructor(e,t,s,n){this._name=e.name,this._link=e.link,this._id=e._id,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteCard=n,this._data=e}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._toggleLike())),this._deleteButton.addEventListener("click",(()=>this._handleDeleteButtonClick())),this._cardImage.addEventListener("click",(()=>this._handleImageClick(this._name,this._link)))}_handleDeleteButtonClick(){this._handleDeleteCard(this)}_toggleLike(){this._likeButton.classList.contains("card__like-button_active")?this._api.unlikeCard(this._id).then((e=>{this._likeButton.classList.remove("card__like-button_active"),this._data.isLiked=!1})).catch((e=>console.error("Failed to unlike card:",e))):this._api.likeCard(this._id).then((e=>{this._likeButton.classList.add("card__like-button_active"),this._data.isLiked=!0})).catch((e=>console.error("Failed to like card:",e)))}_deleteCard(){this._element.remove()}generateCard(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._cardImage=this._element.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._element.dataset.cardId=this._id,this._data.isLiked&&this._likeButton.classList.add("card__like-button_active"),this._setEventListeners(),this._element}}class s{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}clear(){this._container.innerHTML=""}}class n{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popup.querySelector(".modal__close").addEventListener("click",(()=>this.close())),this._popup.addEventListener("click",(e=>{e.target===this._popup&&this.close()}))}}class r extends n{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popup.querySelector(".modal__form"),this._inputList=this._form.querySelectorAll(".modal__input"),this._submitButton=this._form.querySelector(".modal__button")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t).then((()=>{this._form.reset(),this.close()})).catch((e=>{console.error("Error in form submission:",e)}))}))}close(){super.close()}}const a=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],o={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},i=document.querySelector("#profile-edit-button"),l=document.querySelector("#profile-title-input"),c=document.querySelector("#profile-description-input"),d=document.querySelector(".profile__add-button"),h=document.querySelector("#profile-edit-modal .modal__form"),_=document.querySelector("#add-card-modal .modal__form"),u=document.querySelector("#avatar-edit-form"),m=document.querySelector(".profile__edit-avatar"),p=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_handleResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._handleResponse)}setUserInfo(e){let{name:t,about:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._handleResponse)}setUserAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._handleResponse)}checkIfCardsExist(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._handleResponse).then((e=>e.length>0))}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._handleResponse)}deleteCard(e){return console.log("Attempting to delete card with ID:",e),fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>(console.log("DELETE response status:",e.status,e.statusText),e.ok?e.json().then((e=>(console.log("DELETE response data:",e),e))):Promise.reject(`Error: ${e.status}`))))}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._handleResponse)}unlikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._handleResponse)}getAppInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"ea954eb7-9cc5-4b86-a221-9efd3aedab32","Content-Type":"application/json"}});let v;p.getUserInfo().then((e=>{w.setUserInfo({name:e.name,job:e.about}),w.setAvatar(e.avatar)})).catch((e=>{console.error("Failed to fetch user info:",e)})),p.getInitialCards().then((e=>{v=new s({items:e,renderer:e=>{const t=I(e);v.addItem(t)}},".cards__list"),v.renderItems();const t=e.map((e=>e.name)),n=a.filter((e=>!t.includes(e.name)));return n.length>0?Promise.all(n.map((e=>p.addCard(e)))).then((()=>(console.log("New initial cards added to server."),p.getInitialCards()))):(console.log("All initial cards already exist on the server."),Promise.resolve(e))})).then((e=>{v.clear(),v.renderItems(e)})).catch((e=>{console.error("Error in card operations:",e)}));const f=new e(o,h);f.enableValidation();const g=new e(o,_);g.enableValidation(),new e(o,u).enableValidation();const b=new class extends n{constructor(e,t){super(e),this._handleConfirmAction=t,this._confirmButton=this._popup.querySelector("#confirm-delete-button"),this._cardInstance=null}open(e){super.open(),this._cardInstance=e}setEventListeners(){super.setEventListeners(),this._confirmButton.addEventListener("click",(()=>{this._cardInstance?this._handleConfirmAction(this._cardInstance).then((()=>this.close())).catch((e=>{console.error("Failed to delete card:",e)})):console.error("No card instance found for deletion")}))}}("#delete-card-modal",(e=>p.deleteCard(e._id).then((()=>{e._deleteCard()}))));function E(e){b.open(e)}b.setEventListeners();const k=new class extends n{constructor(e){super(e),this._popupImage=this._popup.querySelector(".modal__image"),this._popupCaption=this._popup.querySelector(".modal__image-description")}open(e){this._popupImage.src=e.link,this._popupImage.alt=e.name,this._popupCaption.textContent=e.name,super.open()}}("#card-picture-modal");function C(e,t){k.open({name:e,link:t})}k.setEventListeners();const L=new r("#profile-edit-modal",(e=>{const t=L._form.querySelector(".modal__button"),s=t.textContent;t.textContent="Saving...",p.setUserInfo({name:e.title,about:e.description}).then((e=>(w.setUserInfo({name:e.name,job:e.about}),new Promise((e=>setTimeout(e,1e3)))))).then((()=>{L.close()})).catch((e=>{console.error("Failed to update user info:",e)})).finally((()=>{t.textContent=s}))})),S=new r("#avatar-edit-modal",(e=>{const t=S._form.querySelector(".modal__button"),s=t.textContent;t.textContent="Saving...";const n={avatar:e["avatar-url"]};return p.setUserAvatar(n).then((e=>(console.log("Avatar update data:",e),w.setAvatar(e.avatar),new Promise((e=>setTimeout(e,1e3)))))).then((()=>{S.close()})).catch((e=>{throw console.error("Failed to update avatar:",e),e})).finally((()=>{t.textContent=s}))}));S.setEventListeners();const y=new r("#add-card-modal",(e=>{const t=y._form.querySelector(".modal__button"),s=t.textContent;t.textContent="Saving...",p.addCard({name:e.title,link:e.description}).then((e=>{const t=I(e);return v.addItem(t),new Promise((e=>setTimeout(e,1e3)))})).then((()=>{y.close(),g.disableButton()})).catch((e=>{console.error("Failed to add new card:",e)})).finally((()=>{t.textContent=s}))}));function I(e){console.log("Creating card with data:",e);const s=new t(e,"#card-template",C,E);return s._api=p,s.generateCard()}L.setEventListeners(),y.setEventListeners(),i.addEventListener("click",(()=>{const e=w.getUserInfo();l.value=e.name,c.value=e.job,f.resetValidation(),L.open()})),d.addEventListener("click",(()=>{y.open()})),m.addEventListener("click",(()=>{S.open()}));const w=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:n}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s),this._avatarElement=document.querySelector(n)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent,avatar:this._avatarElement.src}}setUserInfo(e){let{name:t,job:s,avatar:n}=e;t&&(this._nameElement.textContent=t),s&&(this._jobElement.textContent=s),n&&this.setAvatar(n)}setAvatar(e){this._avatarElement&&(this._avatarElement.src=e)}}({nameSelector:".profile__title",jobSelector:".profile__description",avatarSelector:".profile__image"})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQWUsTUFBTUEsRUFDbkJDLFdBQUFBLENBQVlDLEVBQVVDLEdBQ3BCQyxLQUFLQyxVQUFZSCxFQUNqQkUsS0FBS0UsYUFBZUgsRUFDcEJDLEtBQUtHLFdBQWFDLE1BQU1DLEtBQ3RCTCxLQUFLRSxhQUFhSSxpQkFBaUJOLEtBQUtDLFVBQVVNLGdCQUVwRFAsS0FBS1EsY0FBZ0JSLEtBQUtFLGFBQWFPLGNBQ3JDVCxLQUFLQyxVQUFVUyxxQkFFbkIsQ0FFQUMsZ0JBQUFBLEdBQ0VYLEtBQUtZLG9CQUNQLENBRUFBLGtCQUFBQSxHQUNFWixLQUFLYSxxQkFDTGIsS0FBS0csV0FBV1csU0FBU0MsSUFDdkJBLEVBQWFDLGlCQUFpQixTQUFTLEtBQ3JDaEIsS0FBS2lCLG9CQUFvQkYsR0FDekJmLEtBQUthLG9CQUFvQixHQUN6QixHQUVOLENBRUFJLG1CQUFBQSxDQUFvQkYsR0FDbEIsTUFBTUcsRUFBZWxCLEtBQUtFLGFBQWFPLGNBQ3JDLElBQUlNLEVBQWFJLFlBRWRKLEVBQWFLLFNBQVNDLE9BSXpCTixFQUFhTyxVQUFVQyxPQUFPdkIsS0FBS0MsVUFBVXVCLGlCQUM3Q04sRUFBYU8sWUFBYyxLQUozQlYsRUFBYU8sVUFBVUksSUFBSTFCLEtBQUtDLFVBQVV1QixpQkFDMUNOLEVBQWFPLFlBQWNWLEVBQWFZLGtCQUs1QyxDQUVBZCxrQkFBQUEsR0FDMEJiLEtBQUtHLFdBQVd5QixNQUNyQ2IsSUFBa0JBLEVBQWFLLFNBQVNDLFNBR3pDckIsS0FBSzZCLGdCQUNMN0IsS0FBS1EsY0FBY3NCLFVBQVcsSUFFOUI5QixLQUFLUSxjQUFjYyxVQUFVQyxPQUFPdkIsS0FBS0MsVUFBVThCLHFCQUNuRC9CLEtBQUtRLGNBQWNzQixVQUFXLEVBRWxDLENBR0FFLGVBQUFBLEdBQ0VoQyxLQUFLYSxxQkFDTGIsS0FBS0csV0FBV1csU0FBU0MsSUFDdkIsTUFBTUcsRUFBZWxCLEtBQUtFLGFBQWFPLGNBQ3JDLElBQUlNLEVBQWFJLFlBRW5CSixFQUFhTyxVQUFVQyxPQUFPdkIsS0FBS0MsVUFBVXVCLGlCQUM3Q04sRUFBYU8sWUFBYyxFQUFFLEdBRWpDLENBRUFJLGFBQUFBLEdBQ0U3QixLQUFLUSxjQUFjYyxVQUFVSSxJQUFJMUIsS0FBS0MsVUFBVThCLHFCQUNoRC9CLEtBQUtRLGNBQWNzQixVQUFXLENBQ2hDLEVDbkVhLE1BQU1HLEVBQ25CcEMsV0FBQUEsQ0FBWXFDLEVBQU1DLEVBQWNDLEVBQWtCQyxHQUNoRHJDLEtBQUtzQyxNQUFRSixFQUFLSyxLQUNsQnZDLEtBQUt3QyxNQUFRTixFQUFLTyxLQUNsQnpDLEtBQUswQyxJQUFNUixFQUFLUSxJQUNoQjFDLEtBQUsyQyxjQUFnQlIsRUFDckJuQyxLQUFLNEMsa0JBQW9CUixFQUN6QnBDLEtBQUs2QyxrQkFBb0JSLEVBQ3pCckMsS0FBSzhDLE1BQVFaLENBQ2YsQ0FFQWEsWUFBQUEsR0FLRSxPQUpvQkMsU0FDakJ2QyxjQUFjVCxLQUFLMkMsZUFDbkJNLFFBQVF4QyxjQUFjLFNBQ3RCeUMsV0FBVSxFQUVmLENBRUF0QyxrQkFBQUEsR0FDRVosS0FBS21ELFlBQVluQyxpQkFBaUIsU0FBUyxJQUFNaEIsS0FBS29ELGdCQUN0RHBELEtBQUtxRCxjQUFjckMsaUJBQWlCLFNBQVMsSUFDM0NoQixLQUFLc0QsNkJBRVB0RCxLQUFLdUQsV0FBV3ZDLGlCQUFpQixTQUFTLElBQ3hDaEIsS0FBSzRDLGtCQUFrQjVDLEtBQUtzQyxNQUFPdEMsS0FBS3dDLFFBRTVDLENBQ0FjLHdCQUFBQSxHQUNFdEQsS0FBSzZDLGtCQUFrQjdDLEtBQ3pCLENBQ0FvRCxXQUFBQSxHQUNNcEQsS0FBS21ELFlBQVk3QixVQUFVa0MsU0FBUyw0QkFDdEN4RCxLQUFLeUQsS0FDRkMsV0FBVzFELEtBQUswQyxLQUNoQmlCLE1BQU1DLElBQ0w1RCxLQUFLbUQsWUFBWTdCLFVBQVVDLE9BQU8sNEJBQ2xDdkIsS0FBSzhDLE1BQU1lLFNBQVUsQ0FBSyxJQUUzQkMsT0FBT0MsR0FBUUMsUUFBUUMsTUFBTSx5QkFBMEJGLEtBRTFEL0QsS0FBS3lELEtBQ0ZTLFNBQVNsRSxLQUFLMEMsS0FDZGlCLE1BQU1DLElBQ0w1RCxLQUFLbUQsWUFBWTdCLFVBQVVJLElBQUksNEJBQy9CMUIsS0FBSzhDLE1BQU1lLFNBQVUsQ0FBSSxJQUUxQkMsT0FBT0MsR0FBUUMsUUFBUUMsTUFBTSx1QkFBd0JGLElBRTVELENBQ0FJLFdBQUFBLEdBQ0VuRSxLQUFLb0UsU0FBUzdDLFFBQ2hCLENBRUE4QyxZQUFBQSxHQWlCRSxPQWhCQXJFLEtBQUtvRSxTQUFXcEUsS0FBSytDLGVBQ3JCL0MsS0FBS21ELFlBQWNuRCxLQUFLb0UsU0FBUzNELGNBQWMsc0JBQy9DVCxLQUFLcUQsY0FBZ0JyRCxLQUFLb0UsU0FBUzNELGNBQWMsd0JBQ2pEVCxLQUFLdUQsV0FBYXZELEtBQUtvRSxTQUFTM0QsY0FBYyxnQkFFOUNULEtBQUt1RCxXQUFXZSxJQUFNdEUsS0FBS3dDLE1BQzNCeEMsS0FBS3VELFdBQVdnQixJQUFNdkUsS0FBS3NDLE1BQzNCdEMsS0FBS29FLFNBQVMzRCxjQUFjLGdCQUFnQmdCLFlBQWN6QixLQUFLc0MsTUFFL0R0QyxLQUFLb0UsU0FBU0ksUUFBUUMsT0FBU3pFLEtBQUswQyxJQUVoQzFDLEtBQUs4QyxNQUFNZSxTQUNiN0QsS0FBS21ELFlBQVk3QixVQUFVSSxJQUFJLDRCQUVqQzFCLEtBQUtZLHFCQUVFWixLQUFLb0UsUUFDZCxFQ3hFYSxNQUFNTSxFQUNuQjdFLFdBQUFBLENBQVc4RSxFQUFzQkMsR0FBbUIsSUFBeEMsTUFBRUMsRUFBSyxTQUFFQyxHQUFVSCxFQUM3QjNFLEtBQUsrRSxPQUFTRixFQUNkN0UsS0FBS2dGLFVBQVlGLEVBQ2pCOUUsS0FBS2lGLFdBQWFqQyxTQUFTdkMsY0FBY21FLEVBQzNDLENBR0FNLFdBQUFBLEdBQ0VsRixLQUFLK0UsT0FBT2pFLFNBQVNxRSxJQUNuQm5GLEtBQUtnRixVQUFVRyxFQUFLLEdBRXhCLENBR0FDLE9BQUFBLENBQVFDLEdBQ05yRixLQUFLaUYsV0FBV0ssUUFBUUQsRUFDMUIsQ0FHQUUsS0FBQUEsR0FDRXZGLEtBQUtpRixXQUFXTyxVQUFZLEVBQzlCLEVDdEJhLE1BQU1DLEVBQ25CNUYsV0FBQUEsQ0FBWTZGLEdBQ1YxRixLQUFLMkYsT0FBUzNDLFNBQVN2QyxjQUFjaUYsR0FDckMxRixLQUFLNEYsZ0JBQWtCNUYsS0FBSzRGLGdCQUFnQkMsS0FBSzdGLEtBQ25ELENBRUE4RixJQUFBQSxHQUNFOUYsS0FBSzJGLE9BQU9yRSxVQUFVSSxJQUFJLGdCQUMxQnNCLFNBQVNoQyxpQkFBaUIsVUFBV2hCLEtBQUs0RixnQkFDNUMsQ0FFQUcsS0FBQUEsR0FDRS9GLEtBQUsyRixPQUFPckUsVUFBVUMsT0FBTyxnQkFDN0J5QixTQUFTZ0Qsb0JBQW9CLFVBQVdoRyxLQUFLNEYsZ0JBQy9DLENBRUFBLGVBQUFBLENBQWdCSyxHQUNJLFdBQWRBLEVBQU1DLEtBQ1JsRyxLQUFLK0YsT0FFVCxDQUVBSSxpQkFBQUEsR0FDc0JuRyxLQUFLMkYsT0FBT2xGLGNBQWMsaUJBQ2xDTyxpQkFBaUIsU0FBUyxJQUFNaEIsS0FBSytGLFVBRWpEL0YsS0FBSzJGLE9BQU8zRSxpQkFBaUIsU0FBVWlGLElBQ2pDQSxFQUFNRyxTQUFXcEcsS0FBSzJGLFFBQ3hCM0YsS0FBSytGLE9BQ1AsR0FFSixFQzdCYSxNQUFNTSxVQUFzQlosRUFDekM1RixXQUFBQSxDQUFZNkYsRUFBZVksR0FDekJDLE1BQU1iLEdBQ04xRixLQUFLd0csa0JBQW9CRixFQUN6QnRHLEtBQUt5RyxNQUFRekcsS0FBSzJGLE9BQU9sRixjQUFjLGdCQUN2Q1QsS0FBS0csV0FBYUgsS0FBS3lHLE1BQU1uRyxpQkFBaUIsaUJBQzlDTixLQUFLUSxjQUFnQlIsS0FBS3lHLE1BQU1oRyxjQUFjLGlCQUNoRCxDQUdBaUcsZUFBQUEsR0FDRSxNQUFNQyxFQUFTLENBQUMsRUFJaEIsT0FIQTNHLEtBQUtHLFdBQVdXLFNBQVM4RixJQUN2QkQsRUFBT0MsRUFBTXJFLE1BQVFxRSxFQUFNQyxLQUFLLElBRTNCRixDQUNULENBR0FSLGlCQUFBQSxHQUNFSSxNQUFNSixvQkFDTm5HLEtBQUt5RyxNQUFNekYsaUJBQWlCLFVBQVc4RixJQUNyQ0EsRUFBSUMsaUJBQ0osTUFBTUMsRUFBV2hILEtBQUswRyxrQkFFdEIxRyxLQUFLd0csa0JBQWtCUSxHQUNwQnJELE1BQUssS0FDSjNELEtBQUt5RyxNQUFNUSxRQUNYakgsS0FBSytGLE9BQU8sSUFFYmpDLE9BQU9HLElBQ05ELFFBQVFDLE1BQU0sNEJBQTZCQSxFQUFNLEdBQ2pELEdBRVIsQ0FHQThCLEtBQUFBLEdBQ0VRLE1BQU1SLE9BQ1IsRUN4Q0YsTUFBTW1CLEVBQWUsQ0FDbkIsQ0FDRTNFLEtBQU0sa0JBQ05FLEtBQU0sc0dBRVIsQ0FDRUYsS0FBTSxjQUNORSxLQUFNLHlHQUVSLENBQ0VGLEtBQU0saUJBQ05FLEtBQU0sNEdBRVIsQ0FDRUYsS0FBTSxVQUNORSxLQUFNLHFHQUVSLENBQ0VGLEtBQU0sd0JBQ05FLEtBQU0scUdBRVIsQ0FDRUYsS0FBTSxpQkFDTkUsS0FBTSxtR0FLSjBFLEVBQXFCLENBQ3pCNUcsY0FBZSxnQkFDZkcscUJBQXNCLGlCQUN0QnFCLG9CQUFxQix5QkFDckJQLGdCQUFpQiwwQkFDakI0RixXQUFZLHdCQUlSQyxFQUFpQnJFLFNBQVN2QyxjQUFjLHdCQUN4QzZHLEVBQW9CdEUsU0FBU3ZDLGNBQWMsd0JBQzNDOEcsRUFBMEJ2RSxTQUFTdkMsY0FDdkMsOEJBRUkrRyxFQUFtQnhFLFNBQVN2QyxjQUFjLHdCQUMxQ2dILEVBQWtCekUsU0FBU3ZDLGNBQy9CLG9DQUVJaUgsRUFBYzFFLFNBQVN2QyxjQUFjLGdDQUNyQ2tILEVBQWlCM0UsU0FBU3ZDLGNBQWMscUJBQ3hDbUgsRUFBZ0I1RSxTQUFTdkMsY0FBYyx5QkMxQnZDb0gsRUFBTSxJQ3ZCRyxNQUNiaEksV0FBQUEsQ0FBWWlJLEdBQ1Y5SCxLQUFLK0gsU0FBV0QsRUFBUUUsUUFDeEJoSSxLQUFLaUksU0FBV0gsRUFBUUksT0FDMUIsQ0FFQUMsZUFBQUEsQ0FBZ0JDLEdBQ2QsT0FBSUEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FFTkMsUUFBUUMsT0FBTyxVQUFVSixFQUFJSyxTQUN0QyxDQUtBQyxXQUFBQSxHQUNFLE9BQU9DLE1BQU0sR0FBRzNJLEtBQUsrSCxvQkFBcUIsQ0FDeENhLE9BQVEsTUFDUlYsUUFBU2xJLEtBQUtpSSxXQUNidEUsS0FBSzNELEtBQUttSSxnQkFDZixDQUdBVSxXQUFBQSxDQUFXbEUsR0FBa0IsSUFBakIsS0FBRXBDLEVBQUksTUFBRXVHLEdBQU9uRSxFQUN6QixPQUFPZ0UsTUFBTSxHQUFHM0ksS0FBSytILG9CQUFxQixDQUN4Q2EsT0FBUSxRQUNSVixRQUFTbEksS0FBS2lJLFNBQ2RjLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkIxRyxLQUFNQSxFQUNOdUcsTUFBT0EsTUFFUm5GLEtBQUszRCxLQUFLbUksZ0JBQ2YsQ0FHQWUsYUFBQUEsQ0FBY0MsR0FDWixPQUFPUixNQUFNLEdBQUczSSxLQUFLK0gsMkJBQTRCLENBQy9DYSxPQUFRLFFBQ1JWLFFBQVNsSSxLQUFLaUksU0FDZGMsS0FBTUMsS0FBS0MsVUFBVUUsS0FDcEJ4RixLQUFLM0QsS0FBS21JLGdCQUNmLENBS0FpQixlQUFBQSxHQUNFLE9BQU9ULE1BQU0sR0FBRzNJLEtBQUsrSCxpQkFBa0IsQ0FDckNHLFFBQVNsSSxLQUFLaUksV0FDYnRFLEtBQUszRCxLQUFLbUksZ0JBQ2YsQ0FHQWtCLGlCQUFBQSxHQUNFLE9BQU9WLE1BQU0sR0FBRzNJLEtBQUsrSCxpQkFBa0IsQ0FDckNHLFFBQVNsSSxLQUFLaUksV0FFYnRFLEtBQUszRCxLQUFLbUksaUJBQ1Z4RSxNQUFNMkYsR0FBVUEsRUFBTUMsT0FBUyxHQUNwQyxDQUdBQyxPQUFBQSxDQUFPQyxHQUFpQixJQUFoQixLQUFFbEgsRUFBSSxLQUFFRSxHQUFNZ0gsRUFDcEIsT0FBT2QsTUFBTSxHQUFHM0ksS0FBSytILGlCQUFrQixDQUNyQ2EsT0FBUSxPQUNSVixRQUFTbEksS0FBS2lJLFNBQ2RjLEtBQU1DLEtBQUtDLFVBQVUsQ0FBRTFHLE9BQU1FLFdBQzVCa0IsS0FBSzNELEtBQUttSSxnQkFDZixDQUdBdUIsVUFBQUEsQ0FBV2pGLEdBRVQsT0FEQVQsUUFBUTJGLElBQUkscUNBQXNDbEYsR0FDM0NrRSxNQUFNLEdBQUczSSxLQUFLK0gsa0JBQWtCdEQsSUFBVSxDQUMvQ21FLE9BQVEsU0FDUlYsUUFBU2xJLEtBQUtpSSxXQUNidEUsTUFBTXlFLElBQ1BwRSxRQUFRMkYsSUFBSSwwQkFBMkJ2QixFQUFJSyxPQUFRTCxFQUFJd0IsWUFDbkR4QixFQUFJQyxHQUNDRCxFQUFJRSxPQUFPM0UsTUFBTXpCLElBQ3RCOEIsUUFBUTJGLElBQUksd0JBQXlCekgsR0FDOUJBLEtBR0pxRyxRQUFRQyxPQUFPLFVBQVVKLEVBQUlLLFlBRXhDLENBR0F2RSxRQUFBQSxDQUFTTyxHQUNQLE9BQU9rRSxNQUFNLEdBQUczSSxLQUFLK0gsa0JBQWtCdEQsVUFBZ0IsQ0FDckRtRSxPQUFRLE1BQ1JWLFFBQVNsSSxLQUFLaUksV0FDYnRFLEtBQUszRCxLQUFLbUksZ0JBQ2YsQ0FHQXpFLFVBQUFBLENBQVdlLEdBQ1QsT0FBT2tFLE1BQU0sR0FBRzNJLEtBQUsrSCxrQkFBa0J0RCxVQUFnQixDQUNyRG1FLE9BQVEsU0FDUlYsUUFBU2xJLEtBQUtpSSxXQUNidEUsS0FBSzNELEtBQUttSSxnQkFDZixDQUdBMEIsVUFBQUEsR0FDRSxPQUFPdEIsUUFBUXVCLElBQUksQ0FBQzlKLEtBQUswSSxjQUFlMUksS0FBS29KLG1CQUMvQyxHRHJGa0IsQ0FDbEJwQixRQUFTLGtEQUNURSxRQUFTLENBQ1A2QixjQUFlLHVDQUNmLGVBQWdCLHNCQXFCcEIsSUFBSUMsRUFoQkpuQyxFQUNHYSxjQUNBL0UsTUFBTXNHLElBRUxDLEVBQVNyQixZQUFZLENBQ25CdEcsS0FBTTBILEVBQVMxSCxLQUNmNEgsSUFBS0YsRUFBU25CLFFBRWhCb0IsRUFBU0UsVUFBVUgsRUFBU2QsT0FBTyxJQUVwQ3JGLE9BQU9DLElBQ05DLFFBQVFDLE1BQU0sNkJBQThCRixFQUFJLElBT3BEOEQsRUFDR3VCLGtCQUNBekYsTUFBTTBHLElBQ0xMLEVBQWMsSUFBSXRGLEVBQ2hCLENBQ0VHLE1BQU93RixFQUNQdkYsU0FBV0ssSUFDVCxNQUFNbUYsRUFBY0MsRUFBV3BGLEdBQy9CNkUsRUFBWTVFLFFBQVFrRixFQUFZLEdBR3BDLGdCQUVGTixFQUFZOUUsY0FHWixNQUFNc0YsRUFBb0JILEVBQVVJLEtBQUtDLEdBQVNBLEVBQUtuSSxPQUNqRG9JLEVBQWF6RCxFQUFhMEQsUUFDN0JGLElBQVVGLEVBQWtCSyxTQUFTSCxFQUFLbkksUUFJN0MsT0FBSW9JLEVBQVdwQixPQUFTLEVBQ2ZoQixRQUFRdUIsSUFBSWEsRUFBV0YsS0FBS0MsR0FBUzdDLEVBQUkyQixRQUFRa0IsTUFBUS9HLE1BQzlELEtBQ0VLLFFBQVEyRixJQUFJLHNDQUVMOUIsRUFBSXVCLHNCQUlmcEYsUUFBUTJGLElBQUksa0RBQ0xwQixRQUFRdUMsUUFBUVQsR0FDekIsSUFFRDFHLE1BQU1vSCxJQUVMZixFQUFZekUsUUFDWnlFLEVBQVk5RSxZQUFZNkYsRUFBaUIsSUFFMUNqSCxPQUFPQyxJQUNOQyxRQUFRQyxNQUFNLDRCQUE2QkYsRUFBSSxJQUduRCxNQUFNaUgsRUFBMkIsSUFBSXBMLEVBQ25DdUgsRUFDQU0sR0FFRnVELEVBQXlCckssbUJBR3pCLE1BQU1zSyxFQUF1QixJQUFJckwsRUFBY3VILEVBQW9CTyxHQUNuRXVELEVBQXFCdEssbUJBR1csSUFBSWYsRUFDbEN1SCxFQUNBUSxHQUVzQmhILG1CQUt4QixNQUFNdUssRUFBa0IsSUVoSFQsY0FBb0N6RixFQUNqRDVGLFdBQUFBLENBQVk2RixFQUFleUYsR0FDekI1RSxNQUFNYixHQUNOMUYsS0FBS29MLHFCQUF1QkQsRUFDNUJuTCxLQUFLcUwsZUFBaUJyTCxLQUFLMkYsT0FBT2xGLGNBQWMsMEJBQ2hEVCxLQUFLc0wsY0FBZ0IsSUFDdkIsQ0FFQXhGLElBQUFBLENBQUt5RixHQUNIaEYsTUFBTVQsT0FDTjlGLEtBQUtzTCxjQUFnQkMsQ0FDdkIsQ0FFQXBGLGlCQUFBQSxHQUNFSSxNQUFNSixvQkFDTm5HLEtBQUtxTCxlQUFlckssaUJBQWlCLFNBQVMsS0FDeENoQixLQUFLc0wsY0FDUHRMLEtBQUtvTCxxQkFBcUJwTCxLQUFLc0wsZUFDNUIzSCxNQUFLLElBQU0zRCxLQUFLK0YsVUFDaEJqQyxPQUFPQyxJQUNOQyxRQUFRQyxNQUFNLHlCQUEwQkYsRUFBSSxJQUdoREMsUUFBUUMsTUFBTSxzQ0FDaEIsR0FFSixHRnVGQSxzQkFDQ3NILEdBQ1ExRCxFQUFJNkIsV0FBVzZCLEVBQWE3SSxLQUFLaUIsTUFBSyxLQUMzQzRILEVBQWFwSCxhQUFhLE1BTWhDLFNBQVNxSCxFQUFpQkQsR0FDeEJMLEVBQWdCcEYsS0FBS3lGLEVBQ3ZCLENBSkFMLEVBQWdCL0Usb0JBTWhCLE1BQU1zRixFQUFhLElHOUhKLGNBQTZCaEcsRUFDMUM1RixXQUFBQSxDQUFZNkYsR0FDVmEsTUFBTWIsR0FDTjFGLEtBQUswTCxZQUFjMUwsS0FBSzJGLE9BQU9sRixjQUFjLGlCQUM3Q1QsS0FBSzJMLGNBQWdCM0wsS0FBSzJGLE9BQU9sRixjQUFjLDRCQUNqRCxDQUdBcUYsSUFBQUEsQ0FBSzVELEdBRUhsQyxLQUFLMEwsWUFBWXBILElBQU1wQyxFQUFLTyxLQUM1QnpDLEtBQUswTCxZQUFZbkgsSUFBTXJDLEVBQUtLLEtBQzVCdkMsS0FBSzJMLGNBQWNsSyxZQUFjUyxFQUFLSyxLQUV0Q2dFLE1BQU1ULE1BQ1IsR0grR29DLHVCQUd0QyxTQUFTMUQsRUFBaUJHLEVBQU1FLEdBQzlCZ0osRUFBVzNGLEtBQUssQ0FBRXZELE9BQU1FLFFBQzFCLENBSkFnSixFQUFXdEYsb0JBT1gsTUFBTXlGLEVBQW1CLElBQUl2RixFQUFjLHVCQUF3Qm5FLElBRWpFLE1BQU0ySixFQUFlRCxFQUFpQm5GLE1BQU1oRyxjQUFjLGtCQUNwRHFMLEVBQXFCRCxFQUFhcEssWUFDeENvSyxFQUFhcEssWUFBYyxZQUUzQm9HLEVBQ0dnQixZQUFZLENBQ1h0RyxLQUFNTCxFQUFLNkosTUFDWGpELE1BQU81RyxFQUFLOEosY0FFYnJJLE1BQU1zSSxJQUNML0IsRUFBU3JCLFlBQVksQ0FDbkJ0RyxLQUFNMEosRUFBZ0IxSixLQUN0QjRILElBQUs4QixFQUFnQm5ELFFBR2hCLElBQUlQLFNBQVN1QyxHQUFZb0IsV0FBV3BCLEVBQVMsVUFFckRuSCxNQUFLLEtBRUppSSxFQUFpQjdGLE9BQU8sSUFFekJqQyxPQUFPQyxJQUNOQyxRQUFRQyxNQUFNLDhCQUErQkYsRUFBSSxJQUVsRG9JLFNBQVEsS0FDUE4sRUFBYXBLLFlBQWNxSyxDQUFrQixHQUM3QyxJQUtBTSxFQUFrQixJQUFJL0YsRUFBYyxzQkFBdUJuRSxJQUMvRCxNQUFNMkosRUFBZU8sRUFBZ0IzRixNQUFNaEcsY0FBYyxrQkFDbkRxTCxFQUFxQkQsRUFBYXBLLFlBQ3hDb0ssRUFBYXBLLFlBQWMsWUFFM0IsTUFBTTRLLEVBQWEsQ0FDakJsRCxPQUFRakgsRUFBSyxlQUdmLE9BQU8yRixFQUNKcUIsY0FBY21ELEdBQ2QxSSxNQUFNc0ksSUFDTGpJLFFBQVEyRixJQUFJLHNCQUF1QnNDLEdBQ25DL0IsRUFBU0UsVUFBVTZCLEVBQWdCOUMsUUFDNUIsSUFBSVosU0FBU3VDLEdBQVlvQixXQUFXcEIsRUFBUyxVQUVyRG5ILE1BQUssS0FDSnlJLEVBQWdCckcsT0FBTyxJQUV4QmpDLE9BQU9DLElBRU4sTUFEQUMsUUFBUUMsTUFBTSwyQkFBNEJGLEdBQ3BDQSxDQUFHLElBRVZvSSxTQUFRLEtBQ1BOLEVBQWFwSyxZQUFjcUssQ0FBa0IsR0FDN0MsSUFFTk0sRUFBZ0JqRyxvQkFFaEIsTUFBTW1HLEVBQWUsSUFBSWpHLEVBQWMsbUJBQW9CbkUsSUFDekQsTUFBTTJKLEVBQWVTLEVBQWE3RixNQUFNaEcsY0FBYyxrQkFDaERxTCxFQUFxQkQsRUFBYXBLLFlBQ3hDb0ssRUFBYXBLLFlBQWMsWUFFM0JvRyxFQUNHMkIsUUFBUSxDQUNQakgsS0FBTUwsRUFBSzZKLE1BQ1h0SixLQUFNUCxFQUFLOEosY0FFWnJJLE1BQU00SSxJQUNMLE1BQU1DLEVBQVVqQyxFQUFXZ0MsR0FFM0IsT0FEQXZDLEVBQVk1RSxRQUFRb0gsR0FDYixJQUFJakUsU0FBU3VDLEdBQVlvQixXQUFXcEIsRUFBUyxNQUFNLElBRTNEbkgsTUFBSyxLQUNKMkksRUFBYXZHLFFBQ2JrRixFQUFxQnBKLGVBQWUsSUFFckNpQyxPQUFPQyxJQUNOQyxRQUFRQyxNQUFNLDBCQUEyQkYsRUFBSSxJQUU5Q29JLFNBQVEsS0FDUE4sRUFBYXBLLFlBQWNxSyxDQUFrQixHQUM3QyxJQU9OLFNBQVN2QixFQUFXa0MsR0FFbEJ6SSxRQUFRMkYsSUFBSSwyQkFBNEI4QyxHQUN4QyxNQUFNL0IsRUFBTyxJQUFJekksRUFDZndLLEVBQ0EsaUJBQ0FySyxFQUNBb0osR0FJRixPQUZBZCxFQUFLakgsS0FBT29FLEVBQ1E2QyxFQUFLckcsY0FFM0IsQ0FoQkF1SCxFQUFpQnpGLG9CQUNqQm1HLEVBQWFuRyxvQkFvQmJrQixFQUFlckcsaUJBQWlCLFNBQVMsS0FDdkMsTUFBTWlKLEVBQVdDLEVBQVN4QixjQUMxQnBCLEVBQWtCVCxNQUFRb0QsRUFBUzFILEtBQ25DZ0YsRUFBd0JWLE1BQVFvRCxFQUFTRSxJQUN6Q2EsRUFBeUJoSixrQkFDekI0SixFQUFpQjlGLE1BQU0sSUFJekIwQixFQUFpQnhHLGlCQUFpQixTQUFTLEtBQ3pDc0wsRUFBYXhHLE1BQU0sSUFHckI4QixFQUFjNUcsaUJBQWlCLFNBQVMsS0FDdENvTCxFQUFnQnRHLE1BQU0sSUFJeEIsTUFBTW9FLEVBQVcsSUl4UUYsTUFDYnJLLFdBQUFBLENBQVc4RSxHQUFnRCxJQUEvQyxhQUFFK0gsRUFBWSxZQUFFQyxFQUFXLGVBQUVDLEdBQWdCakksRUFDdkQzRSxLQUFLNk0sYUFBZTdKLFNBQVN2QyxjQUFjaU0sR0FDM0MxTSxLQUFLOE0sWUFBYzlKLFNBQVN2QyxjQUFja00sR0FDMUMzTSxLQUFLK00sZUFBaUIvSixTQUFTdkMsY0FBY21NLEVBQy9DLENBR0FsRSxXQUFBQSxHQUNFLE1BQU8sQ0FDTG5HLEtBQU12QyxLQUFLNk0sYUFBYXBMLFlBQ3hCMEksSUFBS25LLEtBQUs4TSxZQUFZckwsWUFDdEIwSCxPQUFRbkosS0FBSytNLGVBQWV6SSxJQUVoQyxDQUdBdUUsV0FBQUEsQ0FBV1ksR0FBd0IsSUFBdkIsS0FBRWxILEVBQUksSUFBRTRILEVBQUcsT0FBRWhCLEdBQVFNLEVBQzNCbEgsSUFBTXZDLEtBQUs2TSxhQUFhcEwsWUFBY2MsR0FDdEM0SCxJQUFLbkssS0FBSzhNLFlBQVlyTCxZQUFjMEksR0FDcENoQixHQUFRbkosS0FBS29LLFVBQVVqQixFQUM3QixDQUVBaUIsU0FBQUEsQ0FBVTRDLEdBQ0poTixLQUFLK00saUJBQ1AvTSxLQUFLK00sZUFBZXpJLElBQU0wSSxFQUU5QixHSjZPNEIsQ0FDNUJOLGFBQWMsa0JBQ2RDLFlBQWEsd0JBQ2JDLGVBQWdCLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgY29uc3QgaGFzSW52YWxpZElucHV0ID0gdGhpcy5faW5wdXRMaXN0LnNvbWUoXHJcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcclxuICAgICk7XHJcbiAgICBpZiAoaGFzSW52YWxpZElucHV0KSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy9uZXcgYWRkaXRpb25zIHRvIGZpeCBzdWJtaXQgYnV0dG9uIHJlc2V0IHRvIGludmFsaWRcclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpOyAvLyBSZXNldCB0aGUgYnV0dG9uIHN0YXRlXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICAgICk7XHJcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7IC8vIFJlbW92ZSBpbnB1dCBlcnJvciBzdHlsaW5nXHJcbiAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7IC8vIENsZWFyIGVycm9yIG1lc3NhZ2VzXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG4gIC8vZW5kXHJcblxyXG4gIC8vbmV3IGZ1bmN0aW9uXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrLCBoYW5kbGVEZWxldGVDYXJkKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7IC8vbmV3IGRhdGEgcG9pbnQgZm9yIGNhcmQgaWRcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7IC8vIFN0b3JlIHRoZSBBUEkgaW5zdGFuY2VcclxuICAgIHRoaXMuX2RhdGEgPSBkYXRhOyAvLyBTdG9yZSBhbGwgY2FyZCBkYXRhIGZvciBhY2Nlc3MgdG8gaXNMaWtlZFxyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5fdG9nZ2xlTGlrZSgpKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2soKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxyXG4gICAgKTtcclxuICB9XHJcbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCh0aGlzKTtcclxuICB9XHJcbiAgX3RvZ2dsZUxpa2UoKSB7XHJcbiAgICBpZiAodGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIikpIHtcclxuICAgICAgdGhpcy5fYXBpXHJcbiAgICAgICAgLnVubGlrZUNhcmQodGhpcy5faWQpXHJcbiAgICAgICAgLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgICAgICB0aGlzLl9kYXRhLmlzTGlrZWQgPSBmYWxzZTsgLy8gVXBkYXRlIGxvY2FsIHN0YXRlXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byB1bmxpa2UgY2FyZDpcIiwgZXJyKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9hcGlcclxuICAgICAgICAubGlrZUNhcmQodGhpcy5faWQpXHJcbiAgICAgICAgLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgICAgICB0aGlzLl9kYXRhLmlzTGlrZWQgPSB0cnVlOyAvLyBVcGRhdGUgbG9jYWwgc3RhdGVcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxpa2UgY2FyZDpcIiwgZXJyKSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9kZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQuZGF0YXNldC5jYXJkSWQgPSB0aGlzLl9pZDsgLy9jYXJkIGlkIHN0b3JhZ2UgZm9yIGxpa2luZy9kZWxldGluZyBvciBvdGhlciBmdW5jdGlvbnNcclxuXHJcbiAgICBpZiAodGhpcy5fZGF0YS5pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zOyAvLyBBcnJheSBvZiBkYXRhIHRvIHJlbmRlclxyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjsgLy8gRnVuY3Rpb24gdG8gY3JlYXRlIGFuZCBhZGQgYSBzaW5nbGUgaXRlbVxyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7IC8vIERPTSBjb250YWluZXJcclxuICB9XHJcblxyXG4gIC8vIFB1YmxpYyBtZXRob2QgdG8gcmVuZGVyIGFsbCBpdGVtc1xyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTsgLy8gQ2FsbCB0aGUgcmVuZGVyZXIgZnVuY3Rpb24gb24gZWFjaCBpdGVtXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIFB1YmxpYyBtZXRob2QgdG8gYWRkIGEgc2luZ2xlIGl0ZW0gdG8gdGhlIGNvbnRhaW5lclxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7IC8vIEFkZCB0aGUgRE9NIGVsZW1lbnQgdG8gdGhlIGNvbnRhaW5lclxyXG4gIH1cclxuXHJcbiAgLy8gTmV3IG1ldGhvZCB0byBjbGVhciBhbGwgaXRlbXMgZnJvbSB0aGUgY29udGFpbmVyXHJcbiAgY2xlYXIoKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjsgLy8gQ2xlYXIgdGhlIGNvbnRlbnRzIG9mIHRoZSBjb250YWluZXJcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcy5fcG9wdXApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gY29sbGVjdCBmb3JtIGRhdGFcclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB2YWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHZhbHVlcztcclxuICB9XHJcblxyXG4gIC8vIE92ZXJyaWRlIHRoZSBzZXRFdmVudExpc3RlbmVycyBtZXRob2QgdG8gaW5jbHVkZSBmb3JtIHN1Ym1pc3Npb25cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7IC8vIENhbGwgcGFyZW50IG1ldGhvZCB0byBzZXQgdXAgY2xvc2UgbGlzdGVuZXJzXHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgZm9ybURhdGEgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICAvLyBIZXJlLCB3ZSBkb24ndCBjbG9zZSB0aGUgcG9wdXA7IHdlIGxldCB0aGUgaGFuZGxlciBkZWNpZGVcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChmb3JtRGF0YSlcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7IC8vIENsb3NlIG9ubHkgYWZ0ZXIgcHJvbWlzZSByZXNvbHZlc1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGZvcm0gc3VibWlzc2lvbjpcIiwgZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBQdWJsaWMgbWV0aG9kIHRvIGNsb3NlIHRoZSBwb3B1cCBhbmQgcmVzZXQgdGhlIGZvcm1cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7IC8vIENhbGwgcGFyZW50IG1ldGhvZCB0byBjbG9zZSB0aGUgcG9wdXBcclxuICB9XHJcbn1cclxuIiwiLy8gSW5pdGlhbCBjYXJkIGRhdGFcclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vIFZhbGlkYXRpb24gc2V0dGluZ3NcclxuY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuLyogRWxlbWVudHMgKi9cclxuY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbik7XHJcbmNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsIC5tb2RhbF9fZm9ybVwiXHJcbik7XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbCAubW9kYWxfX2Zvcm1cIik7XHJcbmNvbnN0IGF2YXRhckVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItZWRpdC1mb3JtXCIpO1xyXG5jb25zdCBhdmF0YXJFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWF2YXRhclwiKTtcclxuZXhwb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIHByb2ZpbGVFZGl0QnRuLFxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG4gIGFkZE5ld0NhcmRCdXR0b24sXHJcbiAgcHJvZmlsZUVkaXRGb3JtLFxyXG4gIGFkZENhcmRGb3JtLFxyXG4gIGF2YXRhckVkaXRGb3JtLFxyXG4gIGF2YXRhckVkaXRCdG4sXHJcbn07XHJcbiIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgcHJvZmlsZUVkaXRCdG4sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgYWRkQ2FyZEZvcm0sXHJcbiAgYXZhdGFyRWRpdEZvcm0sXHJcbiAgYXZhdGFyRWRpdEJ0bixcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5cclxuLy9uZXcgYXBpIGluc3RhbmNlIGZvciBnZXR0aW5nIHVzZXIgaW5mb1xyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJlYTk1NGViNy05Y2M1LTRiODYtYTIyMS05ZWZkM2FlZGFiMzJcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gQVBJIEZldGNoIHVzZXIgaW5mb3JtYXRpb24gd2hlbiB0aGUgcGFnZSBsb2FkcyAoU3RlcCAxKVxyXG5hcGlcclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xyXG4gICAgLy8gQXNzdW1pbmcgeW91ciBVc2VySW5mbyBjbGFzcyBvbmx5IGhhbmRsZXMgbmFtZSBhbmQgam9iIGZvciBub3dcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcclxuICAgICAgam9iOiB1c2VyRGF0YS5hYm91dCxcclxuICAgIH0pO1xyXG4gICAgdXNlckluZm8uc2V0QXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIGluZm86XCIsIGVycik7XHJcbiAgICAvLyBPcHRpb25hbGx5LCBzaG93IHVzZXIgZmVlZGJhY2sgaGVyZVxyXG4gIH0pO1xyXG5cclxuLy8gRmV0Y2ggY2FyZHMgZnJvbSB0aGUgc2VydmVyIChTdGVwIDIpXHJcbmxldCBjYXJkU2VjdGlvbjtcclxuXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChjYXJkc0RhdGEpID0+IHtcclxuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogY2FyZHNEYXRhLFxyXG4gICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG4gICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgXCIuY2FyZHNfX2xpc3RcIlxyXG4gICAgKTtcclxuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgaW5pdGlhbCBjYXJkcyBleGlzdCBvbiB0aGUgc2VydmVyXHJcbiAgICBjb25zdCBleGlzdGluZ0NhcmROYW1lcyA9IGNhcmRzRGF0YS5tYXAoKGNhcmQpID0+IGNhcmQubmFtZSk7XHJcbiAgICBjb25zdCBjYXJkc1RvQWRkID0gaW5pdGlhbENhcmRzLmZpbHRlcihcclxuICAgICAgKGNhcmQpID0+ICFleGlzdGluZ0NhcmROYW1lcy5pbmNsdWRlcyhjYXJkLm5hbWUpXHJcbiAgICApO1xyXG5cclxuICAgIC8vIE9ubHkgYWRkIG5ldyBpbml0aWFsIGNhcmRzIGlmIHRoZXkncmUgbm90IG9uIHRoZSBzZXJ2ZXJcclxuICAgIGlmIChjYXJkc1RvQWRkLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGNhcmRzVG9BZGQubWFwKChjYXJkKSA9PiBhcGkuYWRkQ2FyZChjYXJkKSkpLnRoZW4oXHJcbiAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJOZXcgaW5pdGlhbCBjYXJkcyBhZGRlZCB0byBzZXJ2ZXIuXCIpO1xyXG4gICAgICAgICAgLy8gUmVmcmVzaCBjYXJkcyBhZnRlciBhZGRpbmcgbmV3IG9uZXNcclxuICAgICAgICAgIHJldHVybiBhcGkuZ2V0SW5pdGlhbENhcmRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coXCJBbGwgaW5pdGlhbCBjYXJkcyBhbHJlYWR5IGV4aXN0IG9uIHRoZSBzZXJ2ZXIuXCIpO1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhcmRzRGF0YSk7IC8vIE5vIG5lZWQgdG8gdXBkYXRlIHNpbmNlIG5vIG5ldyBjYXJkcyB3ZXJlIGFkZGVkXHJcbiAgICB9XHJcbiAgfSlcclxuICAudGhlbigodXBkYXRlZENhcmRzRGF0YSkgPT4ge1xyXG4gICAgLy8gSWYgbmV3IGNhcmRzIHdlcmUgYWRkZWQsIHRoaXMgd2lsbCByZS1yZW5kZXIgd2l0aCBhbGwgY2FyZHNcclxuICAgIGNhcmRTZWN0aW9uLmNsZWFyKCk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcyh1cGRhdGVkQ2FyZHNEYXRhKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gY2FyZCBvcGVyYXRpb25zOlwiLCBlcnIpO1xyXG4gIH0pO1xyXG4vLyBDcmVhdGUgRm9ybVZhbGlkYXRvciBpbnN0YW5jZXNcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIHByb2ZpbGVFZGl0Rm9ybVxyXG4pO1xyXG5wcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy9mb3JtIHZhbGlkYXRvciBmb3IgYWRkIGNhcmQgZm9ybVxyXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYWRkQ2FyZEZvcm0pO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL2Zvcm0gdmFsaWRhdG9yIGZvciBhdmF0YXIgZWRpdCBmb3JtXHJcbmNvbnN0IGF2YXRhckVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIGF2YXRhckVkaXRGb3JtXHJcbik7XHJcbmF2YXRhckVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8qIEZ1bmN0aW9ucyAqL1xyXG5cclxuLy8gQ3JlYXRlIGEgcG9wdXAgZm9yIGRlbGV0ZSBjb25maXJtYXRpb25cclxuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcclxuICBcIiNkZWxldGUtY2FyZC1tb2RhbFwiLFxyXG4gIChjYXJkSW5zdGFuY2UpID0+IHtcclxuICAgIHJldHVybiBhcGkuZGVsZXRlQ2FyZChjYXJkSW5zdGFuY2UuX2lkKS50aGVuKCgpID0+IHtcclxuICAgICAgY2FyZEluc3RhbmNlLl9kZWxldGVDYXJkKCk7IC8vIFJlbW92ZSB0aGUgY2FyZCBmcm9tIHRoZSBET00gYWZ0ZXIgc2VydmVyIGNvbmZpcm1hdGlvblxyXG4gICAgfSk7XHJcbiAgfVxyXG4pO1xyXG5kZWxldGVDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmREZWxldGUoY2FyZEluc3RhbmNlKSB7XHJcbiAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oY2FyZEluc3RhbmNlKTsgLy8gUGFzcyB0aGUgY2FyZCBpbnN0YW5jZSB0byB0aGUgcG9wdXBcclxufVxyXG4vLyBIYW5kbGVzIG9wZW5pbmcgdGhlIGltYWdlIHByZXZpZXcgbW9kYWxcclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNjYXJkLXBpY3R1cmUtbW9kYWxcIik7XHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gU2V0IHVwIHRoZSBldmVudCBsaXN0ZW5lcnMgZnJvbSB0aGUgcGFyZW50IGNsYXNzXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcclxuICBpbWFnZVBvcHVwLm9wZW4oeyBuYW1lLCBsaW5rIH0pO1xyXG59XHJcblxyXG4vLyBOZXcgUG9wdXBXaXRoRm9ybSBpbnN0YW5jZXMgKHVzZXJpbmZvIGludGVncmF0aW9uIGNoYW5nZSBzdGVwIDMpXHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWVkaXQtbW9kYWxcIiwgKGRhdGEpID0+IHtcclxuICAvLyBORVcgQ09ERTogQ2hhbmdlIGJ1dHRvbiB0ZXh0IHRvIFwiU2F2aW5nLi4uXCJcclxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBlZGl0UHJvZmlsZVBvcHVwLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICBjb25zdCBvcmlnaW5hbEJ1dHRvblRleHQgPSBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuXHJcbiAgYXBpXHJcbiAgICAuc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiBkYXRhLnRpdGxlLFxyXG4gICAgICBhYm91dDogZGF0YS5kZXNjcmlwdGlvbixcclxuICAgIH0pXHJcbiAgICAudGhlbigodXBkYXRlZFVzZXJEYXRhKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgICBuYW1lOiB1cGRhdGVkVXNlckRhdGEubmFtZSxcclxuICAgICAgICBqb2I6IHVwZGF0ZWRVc2VyRGF0YS5hYm91dCxcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIFJldHVybiBhIG5ldyBwcm9taXNlIGZvciB0aGUgZGVsYXlcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTsgLy8gMXMgZGVsYXlcclxuICAgIH0pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIC8vIENsb3NlIHRoZSBwb3B1cCBoZXJlLCBhZnRlciB0aGUgZGVsYXlcclxuICAgICAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gdXBkYXRlIHVzZXIgaW5mbzpcIiwgZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IG9yaWdpbmFsQnV0dG9uVGV4dDtcclxuICAgIH0pO1xyXG59KTtcclxuLy9lbmRcclxuXHJcbi8vYXZhdGFyIGVkaXQgcG9wdXAgc3RlcCAoOClcclxuY29uc3QgYXZhdGFyRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYXZhdGFyLWVkaXQtbW9kYWxcIiwgKGRhdGEpID0+IHtcclxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBhdmF0YXJFZGl0UG9wdXAuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gIGNvbnN0IG9yaWdpbmFsQnV0dG9uVGV4dCA9IHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG5cclxuICBjb25zdCBhdmF0YXJEYXRhID0ge1xyXG4gICAgYXZhdGFyOiBkYXRhW1wiYXZhdGFyLXVybFwiXSxcclxuICB9O1xyXG5cclxuICByZXR1cm4gYXBpXHJcbiAgICAuc2V0VXNlckF2YXRhcihhdmF0YXJEYXRhKSAvLyBSZXR1cm4gdGhlIHByb21pc2UgY2hhaW5cclxuICAgIC50aGVuKCh1cGRhdGVkVXNlckRhdGEpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCJBdmF0YXIgdXBkYXRlIGRhdGE6XCIsIHVwZGF0ZWRVc2VyRGF0YSk7IC8vIERlYnVnIGxvZ1xyXG4gICAgICB1c2VySW5mby5zZXRBdmF0YXIodXBkYXRlZFVzZXJEYXRhLmF2YXRhcik7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7IC8vIDEwMDBtcyBkZWxheVxyXG4gICAgfSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgYXZhdGFyRWRpdFBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgYXZhdGFyOlwiLCBlcnIpO1xyXG4gICAgICB0aHJvdyBlcnI7IC8vIFJlLXRocm93IHRoZSBlcnJvciBzbyBQb3B1cFdpdGhGb3JtIGNhbiBjYXRjaCBpdFxyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gb3JpZ2luYWxCdXR0b25UZXh0O1xyXG4gICAgfSk7XHJcbn0pO1xyXG5hdmF0YXJFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLy8gbmV3IGFkZGNhcmQgc2VydmVyIGludGVncmF0aW9uIChzdGVwIDQpXHJcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2FkZC1jYXJkLW1vZGFsXCIsIChkYXRhKSA9PiB7XHJcbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gYWRkQ2FyZFBvcHVwLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICBjb25zdCBvcmlnaW5hbEJ1dHRvblRleHQgPSBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuXHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZCh7XHJcbiAgICAgIG5hbWU6IGRhdGEudGl0bGUsXHJcbiAgICAgIGxpbms6IGRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKG5ld0NhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKG5ld0NhcmREYXRhKTtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkKTtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTsgLy8gMTAwMG1zIGRlbGF5XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gYWRkIG5ldyBjYXJkOlwiLCBlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gb3JpZ2luYWxCdXR0b25UZXh0O1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGNyZWF0ZSBhIG5ldyBjYXJkXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcclxuICAvL25ldzogbG9nZ2luZyBjYXJkRGF0YSB0byBzZWUgd2hhdCdzIHBhc3NlZCB0aHJvdWdoXHJcbiAgY29uc29sZS5sb2coXCJDcmVhdGluZyBjYXJkIHdpdGggZGF0YTpcIiwgY2FyZERhdGEpO1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGNhcmREYXRhLFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZUNhcmREZWxldGVcclxuICApO1xyXG4gIGNhcmQuX2FwaSA9IGFwaTsgLy9uZXcgY29kZVxyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7IC8vIFJldHVybiB0aGUgY2FyZCBlbGVtZW50XHJcbn1cclxuXHJcbi8qIEV2ZW50IExpc3RlbmVycyAqL1xyXG5cclxuLy9zdGFydDogbmV3IHVzZXJpbmZvLmpzIGludGVncmF0aW9uXHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpOyAvLyBHZXQgY3VycmVudCB1c2VyIGRhdGFcclxuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5qb2I7XHJcbiAgcHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpOyAvLyBSZXNldCB2YWxpZGF0aW9uIHN0YXRlXHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7IC8vIE9wZW4gdGhlIGVkaXQgcHJvZmlsZSBwb3B1cFxyXG59KTtcclxuLy9lbmRcclxuXHJcbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkUG9wdXAub3BlbigpOyAvLyBPcGVuIHRoZSBhZGQgY2FyZCBwb3B1cFxyXG59KTtcclxuLy9ldmVudCBsaXN0ZW5lciBmb3IgYXZhdGFyIGVkaXQgYnV0dG9uXHJcbmF2YXRhckVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhdmF0YXJFZGl0UG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vbmV3IGNvZGVcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxuICBhdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9faW1hZ2VcIixcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgLy8gVXNlciByb3V0ZXNcclxuXHJcbiAgLy8gR2V0IHRoZSBjdXJyZW50IHVzZXIncyBpbmZvXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIHVzZXIgcHJvZmlsZSBpbmZvcm1hdGlvblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8gVXBkYXRlIHVzZXIgYXZhdGFyXHJcbiAgc2V0VXNlckF2YXRhcihhdmF0YXIpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShhdmF0YXIpLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyBDYXJkIHJvdXRlc1xyXG5cclxuICAvLyBHZXQgYWxsIGNhcmRzXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyBNZXRob2QgdG8gY2hlY2sgaWYgY2FyZHMgZXhpc3Qgb24gdGhlIHNlcnZlclxyXG4gIGNoZWNrSWZDYXJkc0V4aXN0KCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXHJcbiAgICAgIC50aGVuKChjYXJkcykgPT4gY2FyZHMubGVuZ3RoID4gMCk7IC8vIFJldHVybiB0cnVlIGlmIHRoZXJlIGFyZSBhbnkgY2FyZHMsIG90aGVyd2lzZSBmYWxzZVxyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIGEgbmV3IGNhcmRcclxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8gRGVsZXRlIGEgY2FyZFxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkF0dGVtcHRpbmcgdG8gZGVsZXRlIGNhcmQgd2l0aCBJRDpcIiwgY2FyZElkKTtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkRFTEVURSByZXNwb25zZSBzdGF0dXM6XCIsIHJlcy5zdGF0dXMsIHJlcy5zdGF0dXNUZXh0KTtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiREVMRVRFIHJlc3BvbnNlIGRhdGE6XCIsIGRhdGEpO1xyXG4gICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBMaWtlIGEgY2FyZFxyXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyBEaXNsaWtlIGEgY2FyZFxyXG4gIHVubGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIC8vIEZldGNoIGJvdGggdXNlciBpbmZvIGFuZCBjYXJkcyBzaW11bHRhbmVvdXNseVxyXG4gIGdldEFwcEluZm8oKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVDb25maXJtQWN0aW9uKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUNvbmZpcm1BY3Rpb24gPSBoYW5kbGVDb25maXJtQWN0aW9uO1xyXG4gICAgdGhpcy5fY29uZmlybUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybS1kZWxldGUtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZEluc3RhbmNlID0gbnVsbDsgLy8gVG8gc3RvcmUgdGhlIGNhcmQgaW5zdGFuY2VcclxuICB9XHJcblxyXG4gIG9wZW4oY2FyZEluc3RhbmNlKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9jYXJkSW5zdGFuY2UgPSBjYXJkSW5zdGFuY2U7IC8vIFN0b3JlIHRoZSBpbnN0YW5jZVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fY29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5fY2FyZEluc3RhbmNlKSB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ29uZmlybUFjdGlvbih0aGlzLl9jYXJkSW5zdGFuY2UpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLmNsb3NlKCkpXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGRlbGV0ZSBjYXJkOlwiLCBlcnIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIGNhcmQgaW5zdGFuY2UgZm91bmQgZm9yIGRlbGV0aW9uXCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLWRlc2NyaXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gT3ZlcnJpZGUgdGhlIG9wZW4gbWV0aG9kIHRvIGhhbmRsZSBpbWFnZSBhbmQgY2FwdGlvblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgLy8gZGF0YSBzaG91bGQgYmUgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG5hbWUgYW5kIGxpbmtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9wb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcblxyXG4gICAgc3VwZXIub3BlbigpOyAvLyBDYWxsIHRoZSBwYXJlbnQncyBvcGVuIG1ldGhvZCB0byBzaG93IHRoZSBwb3B1cFxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8vIFJldHVybnMgYW4gb2JqZWN0IHdpdGggdXNlciBpbmZvXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICBhdmF0YXI6IHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIFNldHMgbmV3IHVzZXIgaW5mbyB0byB0aGUgcGFnZVxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgam9iLCBhdmF0YXIgfSkge1xyXG4gICAgaWYgKG5hbWUpIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIGlmIChqb2IpIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgICBpZiAoYXZhdGFyKSB0aGlzLnNldEF2YXRhcihhdmF0YXIpO1xyXG4gIH1cclxuICAvL1NldHMgdGhlIFVzZXIgQXZhdGFyXHJcbiAgc2V0QXZhdGFyKGF2YXRhclVybCkge1xyXG4gICAgaWYgKHRoaXMuX2F2YXRhckVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXJVcmw7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9zZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJxdWVyeVNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiaW5wdXRFcnJvckNsYXNzIiwidGV4dENvbnRlbnQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVzZXRWYWxpZGF0aW9uIiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2FyZCIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2RhdGEiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfbGlrZUJ1dHRvbiIsIl90b2dnbGVMaWtlIiwiX2RlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVCdXR0b25DbGljayIsIl9jYXJkSW1hZ2UiLCJjb250YWlucyIsIl9hcGkiLCJ1bmxpa2VDYXJkIiwidGhlbiIsInVwZGF0ZWRDYXJkIiwiaXNMaWtlZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibGlrZUNhcmQiLCJfZGVsZXRlQ2FyZCIsIl9lbGVtZW50IiwiZ2VuZXJhdGVDYXJkIiwic3JjIiwiYWx0IiwiZGF0YXNldCIsImNhcmRJZCIsIlNlY3Rpb24iLCJfcmVmIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImNsZWFyIiwiaW5uZXJIVE1MIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJ2YWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJmb3JtRGF0YSIsInJlc2V0IiwiaW5pdGlhbENhcmRzIiwidmFsaWRhdGlvblNldHRpbmdzIiwiZXJyb3JDbGFzcyIsInByb2ZpbGVFZGl0QnRuIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImFkZE5ld0NhcmRCdXR0b24iLCJwcm9maWxlRWRpdEZvcm0iLCJhZGRDYXJkRm9ybSIsImF2YXRhckVkaXRGb3JtIiwiYXZhdGFyRWRpdEJ0biIsImFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfaGFuZGxlUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0VXNlckluZm8iLCJmZXRjaCIsIm1ldGhvZCIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInNldFVzZXJBdmF0YXIiLCJhdmF0YXIiLCJnZXRJbml0aWFsQ2FyZHMiLCJjaGVja0lmQ2FyZHNFeGlzdCIsImNhcmRzIiwibGVuZ3RoIiwiYWRkQ2FyZCIsIl9yZWYyIiwiZGVsZXRlQ2FyZCIsImxvZyIsInN0YXR1c1RleHQiLCJnZXRBcHBJbmZvIiwiYWxsIiwiYXV0aG9yaXphdGlvbiIsImNhcmRTZWN0aW9uIiwidXNlckRhdGEiLCJ1c2VySW5mbyIsImpvYiIsInNldEF2YXRhciIsImNhcmRzRGF0YSIsImNhcmRFbGVtZW50IiwiY3JlYXRlQ2FyZCIsImV4aXN0aW5nQ2FyZE5hbWVzIiwibWFwIiwiY2FyZCIsImNhcmRzVG9BZGQiLCJmaWx0ZXIiLCJpbmNsdWRlcyIsInJlc29sdmUiLCJ1cGRhdGVkQ2FyZHNEYXRhIiwicHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJkZWxldGVDYXJkUG9wdXAiLCJoYW5kbGVDb25maXJtQWN0aW9uIiwiX2hhbmRsZUNvbmZpcm1BY3Rpb24iLCJfY29uZmlybUJ1dHRvbiIsIl9jYXJkSW5zdGFuY2UiLCJjYXJkSW5zdGFuY2UiLCJoYW5kbGVDYXJkRGVsZXRlIiwiaW1hZ2VQb3B1cCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwQ2FwdGlvbiIsImVkaXRQcm9maWxlUG9wdXAiLCJzdWJtaXRCdXR0b24iLCJvcmlnaW5hbEJ1dHRvblRleHQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidXBkYXRlZFVzZXJEYXRhIiwic2V0VGltZW91dCIsImZpbmFsbHkiLCJhdmF0YXJFZGl0UG9wdXAiLCJhdmF0YXJEYXRhIiwiYWRkQ2FyZFBvcHVwIiwibmV3Q2FyZERhdGEiLCJuZXdDYXJkIiwiY2FyZERhdGEiLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsImF2YXRhclVybCJdLCJzb3VyY2VSb290IjoiIn0=